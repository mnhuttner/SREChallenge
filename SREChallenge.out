Using /etc/ansible/ansible.cfg as config file

PLAY [localhost] **************************************************************************************************

TASK [Gathering Facts] ********************************************************************************************
ok: [localhost]

TASK [install packages for CentOS] ********************************************************************************
ok: [localhost] => (item=[u'python-devel', u'python-setuptools', u'git-core', u'nginx', u'openssl']) => {"changed": false, "item": ["python-devel", "python-setuptools", "git-core", "nginx", "openssl"], "msg": "", "rc": 0, "results": ["All packages providing python-devel are up to date", "All packages providing python-setuptools are up to date", "All packages providing git-core are up to date", "All packages providing nginx are up to date", "All packages providing openssl are up to date", ""]}

TASK [Check Nginx configs exist] **********************************************************************************
ok: [localhost] => {"changed": false, "stat": {"atime": 1500826827.756692, "attr_flags": "", "attributes": [], "block_size": 4096, "blocks": 0, "charset": "binary", "ctime": 1500826828.5196633, "dev": 64768, "device_type": 0, "executable": true, "exists": true, "gid": 0, "gr_name": "root", "inode": 34797155, "isblk": false, "ischr": false, "isdir": true, "isfifo": false, "isgid": false, "islnk": false, "isreg": false, "issock": false, "isuid": false, "mimetype": "inode/directory", "mode": "0777", "mtime": 1500826828.5196633, "nlink": 8, "path": "/etc/nginx/.git", "pw_name": "root", "readable": true, "rgrp": true, "roth": true, "rusr": true, "size": 180, "uid": 0, "version": "18446744071889882896", "wgrp": true, "woth": true, "writeable": true, "wusr": true, "xgrp": true, "xoth": true, "xusr": true}}

TASK [Remove default Nginx configs] *******************************************************************************
skipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False", "skipped": true}

TASK [Clone Nginx configs] ****************************************************************************************
skipping: [localhost] => {"changed": false, "skip_reason": "Conditional result was False", "skipped": true}

TASK [copy] *******************************************************************************************************
ok: [localhost] => {"changed": false, "checksum": "196596132f1efc20c87322e6b18772f38ac63002", "dest": "/usr/share/nginx/html/index.html", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/usr/share/nginx/html/index.html", "secontext": "system_u:object_r:httpd_sys_content_t:s0", "size": 72, "state": "file", "uid": 0}

TASK [generate SSL key] *******************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["openssl", "genrsa", "-des3", "-passout", "pass:x", "-out", "/tmp/cent1.pass.key", "2048"], "delta": "0:00:00.117377", "end": "2017-07-23 13:07:02.777664", "rc": 0, "start": "2017-07-23 13:07:02.660287", "stderr": "Generating RSA private key, 2048 bit long modulus\n................................................+++\n.....+++\ne is 65537 (0x10001)", "stderr_lines": ["Generating RSA private key, 2048 bit long modulus", "................................................+++", ".....+++", "e is 65537 (0x10001)"], "stdout": "", "stdout_lines": []}

TASK [check SSL key 1] ********************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["cat", "/tmp/cent1.pass.key"], "delta": "0:00:00.004198", "end": "2017-07-23 13:07:03.009982", "rc": 0, "start": "2017-07-23 13:07:03.005784", "stderr": "", "stderr_lines": [], "stdout": "-----BEGIN RSA PRIVATE KEY-----\nProc-Type: 4,ENCRYPTED\nDEK-Info: DES-EDE3-CBC,905D65B3C886178F\n\nwLc0MJFkRiB/C+U8rVBOog8QdQR/fixEflykgDpGIQBPrUd3YyT7L17d/U6wmJ32\nrF2WOAjh1SKLOrtMCYWMB24Iz8O5dFg14PxI8tEbX9ry3EWBuD1KzzZGXbYd2O2x\nVqq7FLpWbmj5XkcN0jVTVeMN4S29l/ghe+R9njlp4myZKmHIk4J5GAOsW/QTx+k4\nnrgfut7hCehGZTHiRBCY+x+fbvO52ngzMwqFT/LmuBj3YJJ78Rcfn/KXFm7nwkLE\nTYp27McMnYI+hc/+r0VLWJbm5dmohb2S25cev/0VHKJg4gy0KdwBerN46TSyh8c7\nxjAgBT0TrvKr8u9Sw8/QGdyeq9b7hBBF7u2XF/IA4mezS4dPbe3GHw0p07rzt/3Q\nS64TZRGH5/sJg8LKA7ynWAFgcx1y5bQ6+hAoL8PC95Wenvo5d5xpHN7Gqyn1rvxt\nqPPG/m+S4tGWaIIL0HdJ8nZYDaRaTc+7mI3TGGox3XXiBYh/WJor6ku96glDI9Uq\nC/4dN9dg38DtZ9zYFAOgWLuuHSK/cnneck6WKfELS4xkqI4Mpdg/1ThD5d8RtQew\nKjMiDozPM4NvI940767pAZ3A+3OVLqiu1Ynni7Dbx4PZNHHakZv5pOAxk1NdJ9R4\nIzjpBMuKov3wQR7kbFNjysOcsFp3o+mLcwjtc/zYyCrNnD7RDJhPN83WuKQN42WR\nH9Xh60ZLNPWD8yY241YIFhzedT/sYBWQ+6Hss71WP4mjSYCiuuFE4qN0bqvav2c4\nNf+A3L8/ICiol2NFXkMcdss7ijn/rfE3j+OS8za1kuLkgVoxcfadX1/VJEppB+v/\nH20p3F1295VRfc+fkHyXZbToURlWm4ytdWBVQWOoefuRLK4gWQOwH5vMa6sxir/5\nBTdNm8dZqSkiSE6hTY55rpV+vZu0ulO14lag5O58DfMxisubeNqzoWVlgihIUEJs\nVwZsznFnXOVjvXYZIHveFdzuwt3rwhfDGQjwOW8koCre40GU1G60PobSFd6YOQss\nxMUFH01TZyjQxTHH0dExkF6mnIMs22CgoR+kheFaQcfncfl7ZVJM8oM69KI/DPFK\nfNgeJ37w4d4IfSP4+x3J4/Y0hWt/DLXQvSa4qMTrOYQvoD3xUDyToAnR0D1vWFf6\n6dqFp3q4DKniMOWJ3G1ngdhB5fXAarYJbCg2WuVOUvz8+hQQ7ApPgkhLEldTOiwG\nwtcQGOEp0Y+3AT6ddLuikH0ynpz8hhYftUAB2Ckral52Varw4P9F2FPRtVCeLp4Z\noaWaTDxpymA9tmQn7WHa7HlpNePOarbe6lQd+djTGFN54hxxemyuMY06k8hT7Xch\nI4HH+qQxZ4zv7peFIiBqoZqyY83rBGghO39VQp2lftJu1lMuI+fxVe6k5eTg6q8q\nJsFJLmez0v0R16GEHfBhfWP1mtTfoxNq3UaoFshFRca/iC85pVMshs/HtuJFldJ2\nwsWI4uD72d+gjI0bfaGXj3tmH6ilD/sbGioFdrY707YoX+DCb8WIneluT0t+/j9u\nyd97rb95CF0f0FTXU/PlYnIR3CXoNO/esYwK/KXYf/baAXkhAFZuYwB3NDob9Ohv\n-----END RSA PRIVATE KEY-----", "stdout_lines": ["-----BEGIN RSA PRIVATE KEY-----", "Proc-Type: 4,ENCRYPTED", "DEK-Info: DES-EDE3-CBC,905D65B3C886178F", "", "wLc0MJFkRiB/C+U8rVBOog8QdQR/fixEflykgDpGIQBPrUd3YyT7L17d/U6wmJ32", "rF2WOAjh1SKLOrtMCYWMB24Iz8O5dFg14PxI8tEbX9ry3EWBuD1KzzZGXbYd2O2x", "Vqq7FLpWbmj5XkcN0jVTVeMN4S29l/ghe+R9njlp4myZKmHIk4J5GAOsW/QTx+k4", "nrgfut7hCehGZTHiRBCY+x+fbvO52ngzMwqFT/LmuBj3YJJ78Rcfn/KXFm7nwkLE", "TYp27McMnYI+hc/+r0VLWJbm5dmohb2S25cev/0VHKJg4gy0KdwBerN46TSyh8c7", "xjAgBT0TrvKr8u9Sw8/QGdyeq9b7hBBF7u2XF/IA4mezS4dPbe3GHw0p07rzt/3Q", "S64TZRGH5/sJg8LKA7ynWAFgcx1y5bQ6+hAoL8PC95Wenvo5d5xpHN7Gqyn1rvxt", "qPPG/m+S4tGWaIIL0HdJ8nZYDaRaTc+7mI3TGGox3XXiBYh/WJor6ku96glDI9Uq", "C/4dN9dg38DtZ9zYFAOgWLuuHSK/cnneck6WKfELS4xkqI4Mpdg/1ThD5d8RtQew", "KjMiDozPM4NvI940767pAZ3A+3OVLqiu1Ynni7Dbx4PZNHHakZv5pOAxk1NdJ9R4", "IzjpBMuKov3wQR7kbFNjysOcsFp3o+mLcwjtc/zYyCrNnD7RDJhPN83WuKQN42WR", "H9Xh60ZLNPWD8yY241YIFhzedT/sYBWQ+6Hss71WP4mjSYCiuuFE4qN0bqvav2c4", "Nf+A3L8/ICiol2NFXkMcdss7ijn/rfE3j+OS8za1kuLkgVoxcfadX1/VJEppB+v/", "H20p3F1295VRfc+fkHyXZbToURlWm4ytdWBVQWOoefuRLK4gWQOwH5vMa6sxir/5", "BTdNm8dZqSkiSE6hTY55rpV+vZu0ulO14lag5O58DfMxisubeNqzoWVlgihIUEJs", "VwZsznFnXOVjvXYZIHveFdzuwt3rwhfDGQjwOW8koCre40GU1G60PobSFd6YOQss", "xMUFH01TZyjQxTHH0dExkF6mnIMs22CgoR+kheFaQcfncfl7ZVJM8oM69KI/DPFK", "fNgeJ37w4d4IfSP4+x3J4/Y0hWt/DLXQvSa4qMTrOYQvoD3xUDyToAnR0D1vWFf6", "6dqFp3q4DKniMOWJ3G1ngdhB5fXAarYJbCg2WuVOUvz8+hQQ7ApPgkhLEldTOiwG", "wtcQGOEp0Y+3AT6ddLuikH0ynpz8hhYftUAB2Ckral52Varw4P9F2FPRtVCeLp4Z", "oaWaTDxpymA9tmQn7WHa7HlpNePOarbe6lQd+djTGFN54hxxemyuMY06k8hT7Xch", "I4HH+qQxZ4zv7peFIiBqoZqyY83rBGghO39VQp2lftJu1lMuI+fxVe6k5eTg6q8q", "JsFJLmez0v0R16GEHfBhfWP1mtTfoxNq3UaoFshFRca/iC85pVMshs/HtuJFldJ2", "wsWI4uD72d+gjI0bfaGXj3tmH6ilD/sbGioFdrY707YoX+DCb8WIneluT0t+/j9u", "yd97rb95CF0f0FTXU/PlYnIR3CXoNO/esYwK/KXYf/baAXkhAFZuYwB3NDob9Ohv", "-----END RSA PRIVATE KEY-----"]}

TASK [generate SSL key 2] *****************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["openssl", "rsa", "-passin", "pass:x", "-in", "/tmp/cent1.pass.key", "-out", "/etc/ssl/private/cent1.key"], "delta": "0:00:00.008504", "end": "2017-07-23 13:07:03.221022", "rc": 0, "start": "2017-07-23 13:07:03.212518", "stderr": "writing RSA key", "stderr_lines": ["writing RSA key"], "stdout": "", "stdout_lines": []}

TASK [check SSL key output] ***************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["cat", "/etc/ssl/private/cent1.key"], "delta": "0:00:00.004085", "end": "2017-07-23 13:07:03.433643", "rc": 0, "start": "2017-07-23 13:07:03.429558", "stderr": "", "stderr_lines": [], "stdout": "-----BEGIN RSA PRIVATE KEY-----\nMIIEpQIBAAKCAQEAwCiwOxKg8jZi6EvZ/lhUuy4gSK76MfCfUenWe92GCxYlBZjO\n9BPGhkLPJyskrUXWkGeJOVVs1O8Zrlj4lzvvZTUu2bE+fK+Sce31WtsWK8DhAcVL\noYmQzAmFrSGzTsZsM5/6YUwGVMbU01lDUh4G/RsmRLOdnFA1LUVX7UxZcQYSZOCM\nrpN9Hyh0GLSUq7ypI/DUWlIHs4B1HlBQa+479DtDLI0y1/+cBOU3HwyeveeBabEg\n0y+BnP46ZQj9LPLbvrV5qQiiJ4N9sECc4dLrWVXJDASEN1DM/PUiu6Q4YUQfhNvB\nrqM01VpA1go4BYTEQcKIZVtpj67ehKikhNHpXQIDAQABAoIBAESgw3/1gUHAJsbs\nACkUhv5q1ODgjT60v1HT/+QxE6R1/jbnglItleNxjOZiRDEWFjFwqNOvLLVHx5Y6\n9F2e7DrrKZZZ9QU290h1QgF26Y4qzrGBMye4J9yXMgTJWm6x8wblBdkl+8TfVjc9\nVAvJ6ZkPzzUOKSYghz1p3KNFd1QjxU2PEs9Q8oTxhWYj0Tc1mnFqAdhTdF+iXX1S\n4T/V0/NmEjMrnKnS+qPk2CJOXjfhZX21TsyP91hlfMoYteHN/sZS3RcDbl+10+vb\nQzR4ieJKxoTfsmaH38eA90QwcGR4K+7id93eoeMQKEMbsZIfhpxa7OSbDgYq+fEq\nc78Y6kkCgYEA+9E+2MJkO4rtb/7bSQ4lV60adLyvtmf3bcofKyX6bhubaThhowYx\nNlvGzxuORoaoUOMH9EUVb9D8UBDcwsiSCDH3wVzywfCBlMM6B1YOC8UEp1SPXSMI\nOZhVI0VGeW4anuOKcAzJNhTHbbblrUjkdLYaQla/iqaExtQy6rM0V/MCgYEAw1nE\n1GFkXqxyBvhjmDATxHLUU0vwiLEdCutzo3X0oz4feRQyY3a5SG0qb+XZCBBmyil8\n1BK96YseL7hSHYigQbq0MF50XAkGSfGbQU8tx9uqQyq8MBbRZhjojEd96tIU05FN\nC4q5eFXYomSNP7VfqbFPDgp/OtZA809gICHB3W8CgYEAjs05k5ihWLbPMVzYpBQ2\njwLmZt790jYhNYySolh2LOzQ9Bl6HQYM8GOZWaepxkrktoIY56gpoPBltU3qszck\nwSr88hWwwNSP13nitXhSnNAMdIvahRmxt1+woEDP11reE867mhFWJaog8hHvK5aT\nn7AJMieZlZoa39pESZ54h4sCgYEAjeGyKop96qEWxGc9drhccw7vlXwPPEhfDqJJ\nv8wZHUMuerMnkcQV+DuJWfI3ejrnXSdayXC/TFNFXmViBp9HvdWLr6G6o2nOjoAT\nQhDu8Dxj4hq0ybyY461toQz/sEBa7fqXWa2s3XCEQhYD3OSvkUD9aPZIyAP68nyR\nFWVPN7MCgYEAhtIvKIs5Z5WPLG5137t5KB1szpoQFmJOnT9/xReeayC/gbdGMPP3\nvLVMvpqdXQF6ruHIpvavKiHUToi9POZyoFy9W9t9bQ1nZkJPNzOjBUN3KeFJvMmN\nocv1crUOCiS2tp/aXPooF/KPPHR5OdUlSQrgEViATxjCPUTo0GccgfE=\n-----END RSA PRIVATE KEY-----", "stdout_lines": ["-----BEGIN RSA PRIVATE KEY-----", "MIIEpQIBAAKCAQEAwCiwOxKg8jZi6EvZ/lhUuy4gSK76MfCfUenWe92GCxYlBZjO", "9BPGhkLPJyskrUXWkGeJOVVs1O8Zrlj4lzvvZTUu2bE+fK+Sce31WtsWK8DhAcVL", "oYmQzAmFrSGzTsZsM5/6YUwGVMbU01lDUh4G/RsmRLOdnFA1LUVX7UxZcQYSZOCM", "rpN9Hyh0GLSUq7ypI/DUWlIHs4B1HlBQa+479DtDLI0y1/+cBOU3HwyeveeBabEg", "0y+BnP46ZQj9LPLbvrV5qQiiJ4N9sECc4dLrWVXJDASEN1DM/PUiu6Q4YUQfhNvB", "rqM01VpA1go4BYTEQcKIZVtpj67ehKikhNHpXQIDAQABAoIBAESgw3/1gUHAJsbs", "ACkUhv5q1ODgjT60v1HT/+QxE6R1/jbnglItleNxjOZiRDEWFjFwqNOvLLVHx5Y6", "9F2e7DrrKZZZ9QU290h1QgF26Y4qzrGBMye4J9yXMgTJWm6x8wblBdkl+8TfVjc9", "VAvJ6ZkPzzUOKSYghz1p3KNFd1QjxU2PEs9Q8oTxhWYj0Tc1mnFqAdhTdF+iXX1S", "4T/V0/NmEjMrnKnS+qPk2CJOXjfhZX21TsyP91hlfMoYteHN/sZS3RcDbl+10+vb", "QzR4ieJKxoTfsmaH38eA90QwcGR4K+7id93eoeMQKEMbsZIfhpxa7OSbDgYq+fEq", "c78Y6kkCgYEA+9E+2MJkO4rtb/7bSQ4lV60adLyvtmf3bcofKyX6bhubaThhowYx", "NlvGzxuORoaoUOMH9EUVb9D8UBDcwsiSCDH3wVzywfCBlMM6B1YOC8UEp1SPXSMI", "OZhVI0VGeW4anuOKcAzJNhTHbbblrUjkdLYaQla/iqaExtQy6rM0V/MCgYEAw1nE", "1GFkXqxyBvhjmDATxHLUU0vwiLEdCutzo3X0oz4feRQyY3a5SG0qb+XZCBBmyil8", "1BK96YseL7hSHYigQbq0MF50XAkGSfGbQU8tx9uqQyq8MBbRZhjojEd96tIU05FN", "C4q5eFXYomSNP7VfqbFPDgp/OtZA809gICHB3W8CgYEAjs05k5ihWLbPMVzYpBQ2", "jwLmZt790jYhNYySolh2LOzQ9Bl6HQYM8GOZWaepxkrktoIY56gpoPBltU3qszck", "wSr88hWwwNSP13nitXhSnNAMdIvahRmxt1+woEDP11reE867mhFWJaog8hHvK5aT", "n7AJMieZlZoa39pESZ54h4sCgYEAjeGyKop96qEWxGc9drhccw7vlXwPPEhfDqJJ", "v8wZHUMuerMnkcQV+DuJWfI3ejrnXSdayXC/TFNFXmViBp9HvdWLr6G6o2nOjoAT", "QhDu8Dxj4hq0ybyY461toQz/sEBa7fqXWa2s3XCEQhYD3OSvkUD9aPZIyAP68nyR", "FWVPN7MCgYEAhtIvKIs5Z5WPLG5137t5KB1szpoQFmJOnT9/xReeayC/gbdGMPP3", "vLVMvpqdXQF6ruHIpvavKiHUToi9POZyoFy9W9t9bQ1nZkJPNzOjBUN3KeFJvMmN", "ocv1crUOCiS2tp/aXPooF/KPPHR5OdUlSQrgEViATxjCPUTo0GccgfE=", "-----END RSA PRIVATE KEY-----"]}

TASK [generate SSL key 3] *****************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["openssl", "req", "-new", "-key", "/etc/ssl/private/cent1.key", "-out", "cent1.csr", "-subj", "/C=US/ST=NJ/L=Pennington/O=OrgName/OU=IT/CN=cent1"], "delta": "0:00:00.011616", "end": "2017-07-23 13:07:03.662211", "rc": 0, "start": "2017-07-23 13:07:03.650595", "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}

TASK [generate SSL key 4] *****************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["openssl", "x509", "-req", "-days", "365", "-in", "cent1.csr", "-signkey", "/etc/ssl/private/cent1.key", "-out", "/etc/ssl/certs/cent1.crt"], "delta": "0:00:00.050712", "end": "2017-07-23 13:07:03.920635", "rc": 0, "start": "2017-07-23 13:07:03.869923", "stderr": "Signature ok\nsubject=/C=US/ST=NJ/L=Pennington/O=OrgName/OU=IT/CN=cent1\nGetting Private key", "stderr_lines": ["Signature ok", "subject=/C=US/ST=NJ/L=Pennington/O=OrgName/OU=IT/CN=cent1", "Getting Private key"], "stdout": "", "stdout_lines": []}

TASK [Check config] ***********************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["head", "/etc/nginx/nginx.conf"], "delta": "0:00:00.004231", "end": "2017-07-23 13:07:04.128827", "rc": 0, "start": "2017-07-23 13:07:04.124596", "stderr": "", "stderr_lines": [], "stdout": "# For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nuser nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /run/nginx.pid;\n\n# Load dynamic modules. See /usr/share/nginx/README.dynamic.", "stdout_lines": ["# For more information on configuration, see:", "#   * Official English Documentation: http://nginx.org/en/docs/", "#   * Official Russian Documentation: http://nginx.org/ru/docs/", "", "user nginx;", "worker_processes auto;", "error_log /var/log/nginx/error.log;", "pid /run/nginx.pid;", "", "# Load dynamic modules. See /usr/share/nginx/README.dynamic."]}

TASK [service] ****************************************************************************************************
ok: [localhost] => {"changed": false, "enabled": true, "name": "nginx", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2017-07-23 12:44:42 EDT", "ActiveEnterTimestampMonotonic": "85663396118", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "systemd-journald.socket tmp.mount network.target -.mount remote-fs.target system.slice nss-lookup.target basic.target", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2017-07-23 12:44:42 EDT", "AssertTimestampMonotonic": "85663285571", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2017-07-23 12:44:42 EDT", "ConditionTimestampMonotonic": "85663285570", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/nginx.service", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "no", "Description": "The nginx HTTP and reverse proxy server", "DevicePolicy": "auto", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "12411", "ExecMainStartTimestamp": "Sun 2017-07-23 12:44:42 EDT", "ExecMainStartTimestampMonotonic": "85663396041", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/nginx ; argv[]=/usr/sbin/nginx ; ignore_errors=no ; start_time=[Sun 2017-07-23 12:44:42 EDT] ; stop_time=[Sun 2017-07-23 12:44:42 EDT] ; pid=12408 ; code=exited ; status=0 }", "ExecStartPre": "{ path=/usr/sbin/nginx ; argv[]=/usr/sbin/nginx -t ; ignore_errors=no ; start_time=[Sun 2017-07-23 12:44:42 EDT] ; stop_time=[Sun 2017-07-23 12:44:42 EDT] ; pid=12406 ; code=exited ; status=0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/usr/lib/systemd/system/nginx.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "nginx.service", "IgnoreOnIsolate": "no", "IgnoreOnSnapshot": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2017-07-23 12:44:42 EDT", "InactiveExitTimestampMonotonic": "85663287711", "JobTimeoutAction": "none", "JobTimeoutUSec": "0", "KillMode": "process", "KillSignal": "3", "LimitAS": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCPU": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMSGQUEUE": "819200", "LimitNICE": "0", "LimitNOFILE": "4096", "LimitNPROC": "7920", "LimitRSS": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTTIME": "18446744073709551615", "LimitSIGPENDING": "7920", "LimitSTACK": "18446744073709551615", "LoadState": "loaded", "MainPID": "12411", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "Names": "nginx.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PIDFile": "/run/nginx.pid", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "yes", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "basic.target -.mount", "RequiresMountsFor": "/var/tmp", "Restart": "no", "RestartUSec": "100ms", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "10000000", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TimeoutStartUSec": "1min 30s", "TimeoutStopUSec": "5s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "forking", "UMask": "0022", "UnitFilePreset": "disabled", "UnitFileState": "enabled", "WantedBy": "multi-user.target", "Wants": "system.slice", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}

TASK [Test config] ************************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["nginx", "-t"], "delta": "0:00:00.027332", "end": "2017-07-23 13:07:04.770203", "rc": 0, "start": "2017-07-23 13:07:04.742871", "stderr": "nginx: the configuration file /etc/nginx/nginx.conf syntax is ok\nnginx: configuration file /etc/nginx/nginx.conf test is successful", "stderr_lines": ["nginx: the configuration file /etc/nginx/nginx.conf syntax is ok", "nginx: configuration file /etc/nginx/nginx.conf test is successful"], "stdout": "", "stdout_lines": []}

TASK [Check SSL] **************************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["echo", "quit", "|", "openssl", "s_client", "-connect", "cent1:443", "-state", "-nbio", "2>&1", "|", "grep", "^SSL"], "delta": "0:00:00.004098", "end": "2017-07-23 13:07:04.983409", "rc": 0, "start": "2017-07-23 13:07:04.979311", "stderr": "", "stderr_lines": [], "stdout": "quit | openssl s_client -connect cent1:443 -state -nbio 2>&1 | grep ^SSL", "stdout_lines": ["quit | openssl s_client -connect cent1:443 -state -nbio 2>&1 | grep ^SSL"]}

TASK [get default page] *******************************************************************************************
 [WARNING]: Consider using get_url or uri module rather than running curl
changed: [localhost] => {"changed": true, "cmd": ["curl", "-k", "-A", "Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:25.0) Gecko/20100101 Firefox/25.0", "-v", "-o", "content.out", "-L", "http://cent1"], "delta": "0:00:00.015117", "end": "2017-07-23 13:07:05.207175", "rc": 0, "start": "2017-07-23 13:07:05.192058", "stderr": "  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n\r  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0* About to connect() to cent1 port 80 (#0)\n*   Trying 192.168.1.11...\n* Connected to cent1 (192.168.1.11) port 80 (#0)\n> GET / HTTP/1.1\r\n> User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:25.0) Gecko/20100101 Firefox/25.0\r\n> Host: cent1\r\n> Accept: */*\r\n> \r\n< HTTP/1.1 200 OK\r\n< Server: nginx/1.10.2\r\n< Date: Sun, 23 Jul 2017 17:07:05 GMT\r\n< Content-Type: text/html\r\n< Content-Length: 72\r\n< Last-Modified: Sun, 23 Jul 2017 16:44:39 GMT\r\n< Connection: keep-alive\r\n< ETag: \"5974d277-48\"\r\n< Accept-Ranges: bytes\r\n< \r\n{ [data not shown]\n\r100    72  100    72    0     0  12020      0 --:--:-- --:--:-- --:--:-- 14400\n* Connection #0 to host cent1 left intact", "stderr_lines": ["  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current", "                                 Dload  Upload   Total   Spent    Left  Speed", "", "  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0* About to connect() to cent1 port 80 (#0)", "*   Trying 192.168.1.11...", "* Connected to cent1 (192.168.1.11) port 80 (#0)", "> GET / HTTP/1.1", "> User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:25.0) Gecko/20100101 Firefox/25.0", "> Host: cent1", "> Accept: */*", "> ", "< HTTP/1.1 200 OK", "< Server: nginx/1.10.2", "< Date: Sun, 23 Jul 2017 17:07:05 GMT", "< Content-Type: text/html", "< Content-Length: 72", "< Last-Modified: Sun, 23 Jul 2017 16:44:39 GMT", "< Connection: keep-alive", "< ETag: \"5974d277-48\"", "< Accept-Ranges: bytes", "< ", "{ [data not shown]", "", "100    72  100    72    0     0  12020      0 --:--:-- --:--:-- --:--:-- 14400", "* Connection #0 to host cent1 left intact"], "stdout": "", "stdout_lines": []}

TASK [check output] ***********************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["cat", "content.out"], "delta": "0:00:00.004238", "end": "2017-07-23 13:07:05.445708", "rc": 0, "start": "2017-07-23 13:07:05.441470", "stderr": "", "stderr_lines": [], "stdout": "<html> <head> <title>Hello World</title> </head> <body> <h1>Hello World!", "stdout_lines": ["<html> <head> <title>Hello World</title> </head> <body> <h1>Hello World!"]}

TASK [uri] ********************************************************************************************************
ok: [localhost] => {"accept_ranges": "bytes", "changed": false, "connection": "close", "content": "<html> <head> <title>Hello World</title> </head> <body> <h1>Hello World!", "content_length": "72", "content_type": "text/html", "date": "Sun, 23 Jul 2017 17:07:05 GMT", "etag": "\"5974d277-48\"", "last_modified": "Sun, 23 Jul 2017 16:44:39 GMT", "msg": "OK (72 bytes)", "redirected": false, "server": "nginx/1.10.2", "status": 200, "url": "http://cent1"}

TASK [firewalld] **************************************************************************************************
ok: [localhost] => {"changed": false, "msg": "Permanent operation"}

TASK [firewalld] **************************************************************************************************
ok: [localhost] => {"changed": false, "msg": "Permanent operation"}

TASK [service] ****************************************************************************************************
ok: [localhost] => {"changed": false, "enabled": true, "name": "firewalld", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2017-07-23 10:17:57 EDT", "ActiveEnterTimestampMonotonic": "76858140676", "ActiveExitTimestamp": "Sun 2017-07-23 00:47:48 EDT", "ActiveExitTimestampMonotonic": "42649448627", "ActiveState": "active", "After": "dbus.service polkit.service basic.target system.slice", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2017-07-23 10:17:56 EDT", "AssertTimestampMonotonic": "76857360447", "Before": "shutdown.target NetworkManager.service network.target libvirtd.service", "BlockIOAccounting": "no", "BlockIOWeight": "18446744073709551615", "BusName": "org.fedoraproject.FirewallD1", "CPUAccounting": "no", "CPUQuotaPerSecUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "18446744073709551615", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "18446744073709551615", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2017-07-23 10:17:56 EDT", "ConditionTimestampMonotonic": "76857360447", "Conflicts": "ipset.service ebtables.service shutdown.target iptables.service ip6tables.service", "ControlGroup": "/system.slice/firewalld.service", "ControlPID": "0", "DefaultDependencies": "yes", "Delegate": "no", "Description": "firewalld - dynamic firewall daemon", "DevicePolicy": "auto", "Documentation": "man:firewalld(1)", "EnvironmentFile": "/etc/sysconfig/firewalld (ignore_errors=yes)", "ExecMainCode": "0", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "17330", "ExecMainStartTimestamp": "Sun 2017-07-23 10:17:56 EDT", "ExecMainStartTimestampMonotonic": "76857396349", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/sbin/firewalld ; argv[]=/usr/sbin/firewalld --nofork --nopid $FIREWALLD_ARGS ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FragmentPath": "/usr/lib/systemd/system/firewalld.service", "GuessMainPID": "yes", "IOScheduling": "0", "Id": "firewalld.service", "IgnoreOnIsolate": "no", "IgnoreOnSnapshot": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "Sun 2017-07-23 00:47:48 EDT", "InactiveEnterTimestampMonotonic": "42649930534", "InactiveExitTimestamp": "Sun 2017-07-23 10:17:56 EDT", "InactiveExitTimestampMonotonic": "76857397482", "JobTimeoutAction": "none", "JobTimeoutUSec": "0", "KillMode": "control-group", "KillSignal": "15", "LimitAS": "18446744073709551615", "LimitCORE": "18446744073709551615", "LimitCPU": "18446744073709551615", "LimitDATA": "18446744073709551615", "LimitFSIZE": "18446744073709551615", "LimitLOCKS": "18446744073709551615", "LimitMEMLOCK": "65536", "LimitMSGQUEUE": "819200", "LimitNICE": "0", "LimitNOFILE": "4096", "LimitNPROC": "7920", "LimitRSS": "18446744073709551615", "LimitRTPRIO": "0", "LimitRTTIME": "18446744073709551615", "LimitSIGPENDING": "7920", "LimitSTACK": "18446744073709551615", "LoadState": "loaded", "MainPID": "17330", "MemoryAccounting": "no", "MemoryCurrent": "18446744073709551615", "MemoryLimit": "18446744073709551615", "MountFlags": "0", "Names": "firewalld.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "none", "OOMScoreAdjust": "0", "OnFailureJobMode": "replace", "PermissionsStartOnly": "no", "PrivateDevices": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "ProtectHome": "no", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "RemainAfterExit": "no", "Requires": "basic.target", "Restart": "no", "RestartUSec": "100ms", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "null", "StandardInput": "null", "StandardOutput": "null", "StartLimitAction": "none", "StartLimitBurst": "5", "StartLimitInterval": "10000000", "StartupBlockIOWeight": "18446744073709551615", "StartupCPUShares": "18446744073709551615", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "0", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TimeoutStartUSec": "1min 30s", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "Type": "dbus", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "WantedBy": "basic.target", "Wants": "system.slice", "WatchdogTimestamp": "Sun 2017-07-23 10:17:57 EDT", "WatchdogTimestampMonotonic": "76858140583", "WatchdogUSec": "0"}}

TASK [check port services] ****************************************************************************************
changed: [localhost] => {"changed": true, "cmd": ["firewall-cmd", "--list-ports"], "delta": "0:00:00.475603", "end": "2017-07-23 13:07:08.262800", "rc": 0, "start": "2017-07-23 13:07:07.787197", "stderr": "", "stderr_lines": [], "stdout": "443/tcp 80/tcp 8080/tcp", "stdout_lines": ["443/tcp 80/tcp 8080/tcp"]}

PLAY RECAP ********************************************************************************************************
localhost                  : ok=21   changed=12   unreachable=0    failed=0   

